<!-- map and circle, but circle appears in wrong place -->


<!DOCTYPE html>
<style>

/*Styles states on US map*/
.states {
  fill: #ccc;
  stroke: #fff;
}

/*Draws borders between states*/
.state-borders {
  fill: none;
  stroke: #fff;
  stroke-width: 0.5px;
  stroke-linejoin: round;
  stroke-linecap: round;
  pointer-events: none;
}

.circle {
  fill: steelblue;
  fill-opacity: .8;
  stroke: #fff;
}

</style>
<svg width="960" height="600"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3-geo.v1.min.js"></script>
<script src="https://d3js.org/topojson.v2.min.js"></script>
<script>

var svg = d3.select("svg");
// var path = d3.geoPath();
var g = svg.append("g");


var path = d3.geoPath()
    .projection(null);

// var width = 960,
//     height = 500;

// var projection = d3.geo.mercator();
var projection = d3.geoMercator();


// var svg = d3.select("body").append("svg")
//     .attr("width", width)
//     .attr("height", height);

// var path = d3.geoPath()
// // var path = d3.geo.path()
//     .projection(projection);


d3.json("https://d3js.org/us-10m.v1.json", function(error, us) {
  if (error) throw error;
  svg.append("g")
    .attr("class", "states")
    .selectAll("path")
    .data(topojson.feature(us, us.objects.states).features)
    .enter().append("path")
    .attr("d", path);

  //Draw state borders
  svg.append("path")
      .attr("class", "state-borders")
      .attr("d", path(topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; })));

   // points in SF
    aa = [-122.490402, 37.786453];
    bb = [-122.389809, 37.72728];

    // add circles to svg
    // svg.selectAll("circle")
    // .data([aa,bb]).enter()
    // .append("circle")
    // .attr("cx", function (d) { console.log(projection(d)); return projection(d)[0]; })
    // .attr("cy", function (d) { return projection(d)[1]; })

    // .attr("r", "8px")
    // .attr("fill", "red");

  var coordinates = projection([-122.4194, 37.7749]);

  svg.append("circle")
    .attr("cx", coordinates[0])
    .attr("cy", coordinates[1])
    .attr("r", 5)
    .style("fill", "red");


   //Draw symbols
  // d3.csv("/static/d3/origin-cities.csv"), function(error, data) {
  //   svg.append(".symbol")
  //   .data(data)
  //   .enter()
  //   .append("circle")
  //   .attr("x", (function(d) { return projection([d.lon, d.lat])[0];}))
  //   .attr("y", function(d) { return projection([d.lon, d.lat])[1];});

  // };
});




  //Draw symbols
  // d3.csv("/static/d3/origin-cities"), function(origins) {
  //   origin = origins.filter(function(origin){
  //     var location = [origin.longitude, origin.latitude];
  //     positions.push(projection(location));
  //   });
  //   svg.selectAll(".symbol")
  //     .data(origin.location)
  //     .enter().append("path")
  //     .attr("class", "symbol")
  //     .attr("r", 10)
  //     .attr("d", path.pointRadius(function(d) { return radius(d.properties.population); }));
  // }

// });

</script>
